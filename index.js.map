{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/header/heder-handler.js","../src/js/header/mobile-menu.js","../src/js/hero/hero.js","../src/js/api.js","../src/js/books/books-render-categories.js","../src/js/books/books-render-top.js","../src/js/books/books-init.js","../src/js/books/books-handlers.js","../src/js/books/books.js"],"sourcesContent":["export const refs = {\n  openMobileMenuBtn: document.querySelector('.header-mobile-menu'),\n  closeMobileMenuBtn: document.querySelector('.mobile-menu-close'),\n  mobileMenuModal: document.querySelector('.mobile-menu-modal'),\n  // books\n  booksCategoriesList: document.querySelector('.books-categories-list'),\n  booksCategoriesSelect: document.querySelector('.books-categories-select'),\n  booksList: document.querySelector('.books-list'),\n};\n","import { refs } from '../refs.js';\n\nfunction onClickCloseMobileMenu() {\n  refs.mobileMenuModal.classList.remove('is-open');\n  document.body.classList.remove('no-scroll');\n  refs.closeMobileMenuBtn.removeEventListener('click', onClickCloseMobileMenu);\n  refs.openMobileMenuBtn.addEventListener('click', onClickOpenMobileMenu);\n  document.removeEventListener('keydown', onEscCloseMenu);\n  refs.mobileMenuModal.removeEventListener('click', onMenuLinkClick);\n  refs.openMobileMenuBtn.focus();\n}\n\nexport function onClickOpenMobileMenu() {\n  refs.mobileMenuModal.classList.add('is-open');\n  document.body.classList.add('no-scroll');\n  refs.closeMobileMenuBtn.focus();\n  refs.closeMobileMenuBtn.addEventListener('click', onClickCloseMobileMenu);\n  refs.openMobileMenuBtn.removeEventListener('click', onClickOpenMobileMenu);\n\n  document.addEventListener('keydown', onEscCloseMenu);\n  refs.mobileMenuModal.addEventListener('click', onMenuLinkClick);\n}\nfunction onEscCloseMenu(e) {\n  if (e.key === 'Escape') onClickCloseMobileMenu();\n}\nfunction onMenuLinkClick(e) {\n  if (e.target.classList.contains('mobile-menu-link')) {\n    onClickCloseMobileMenu();\n  }\n}\n","import { refs } from '../refs.js';\nimport { onClickOpenMobileMenu } from './heder-handler.js';\n\nrefs.openMobileMenuBtn.addEventListener('click', onClickOpenMobileMenu);\n","// или\nimport Swiper from 'swiper';\nimport { Navigation } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\n\nconst swiper = new Swiper('.swiper', {\n  modules: [Navigation],\n  navigation: {\n    nextEl: '.hero-button-next',\n    prevEl: '.hero-button-prev',\n  },\n  // другие параметры...\n});\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/books';\n\nexport async function getCategories() {\n  const response = await axios.get(`/category-list`);\n\n  return response.data;\n}\n\nexport async function getBooksByCategory(category) {\n  console.log('getBooksByCategory вызвана с категорией:', category);\n  try {\n    const response = await axios.get(\n      // `/category?category=${encodeURIComponent(category)}`\n      `/category?category=${category}`\n    );\n    console.log('BOOKS BY CATEGORY:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Ошибка запроса getBooksByCategory:', error);\n    return [];\n  }\n}\n\nexport async function getTopBooks() {\n  const response = await axios.get('/top-books');\n\n  return response.data;\n}\n","import { refs } from '../refs';\n\nexport function renderCategoriesList(categories) {\n  const markup = [\n    `<li data-category=\"all\" class=\"active\">All categories</li>`,\n    ...categories\n      .filter(categ => categ.list_name)\n      .map(\n        categ =>\n          `<li data-category=\"${encodeURIComponent(categ.list_name)}\">${\n            categ.list_name\n          }</li>`\n      ),\n  ].join('');\n  refs.booksCategoriesList.innerHTML = markup;\n}\n\nexport function renderCategoriesSelect(categories) {\n  const markup = [\n    `<option value=\"\" selected disabled hidden>Categories</option>`, // заголовок-фикс\n    `<option value=\"all\">All categories</option>`,\n    ...categories\n      .filter(cat => cat.list_name)\n      .map(\n        cat =>\n          `<option value=\"${encodeURIComponent(cat.list_name)}\">${\n            cat.list_name\n          }</option>`\n      ),\n  ].join('');\n  refs.booksCategoriesSelect.innerHTML = markup;\n}\n","export function renderTopBooks(data, container) {\n  container.innerHTML = '';\n  // const allBooks = topBooksArray.flatMap(category => category.books);\n  const isMobile = window.innerWidth < 768;\n  const limit = isMobile ? 10 : 24;\n  //\n  let books = [];\n  if (Array.isArray(data) && data.length && data[0].books) {\n    // top-books (категории)\n    books = data.flatMap(category => category.books);\n  } else {\n    // просто массив книг (по категории)\n    books = data;\n  }\n  //\n  const seenTitles = new Set();\n  const filteredBooks = books.filter(book => {\n    // if (!book.price || book.price === '0.00') return false;\n    if (seenTitles.has(book.title)) return false;\n    seenTitles.add(book.title);\n    return true;\n  });\n\n  const limitedBooks = filteredBooks.slice(0, limit);\n\n  const markup = limitedBooks\n    .map(({ book_image, title, author, price }) => {\n      const roundedPrice = Math.ceil(Number(price));\n      return `\n    <li class=\"books-item\">\n      <img src=\"${book_image}\" alt=\"book cover\" class=\"books-item-image\" />\n      <div class=\"books-item-info\">\n        <div class=\"books-item-info-left\">\n          <h4 class=\"books-item-title\">${title}</h4>\n          <p class=\"books-item-author\">${author}</p>\n        </div>\n        <p class=\"books-item-price\">$${roundedPrice}</p>\n      </div>\n      <button type=\"button\" class=\"books-item-open-modal\">\n        learn more\n      </button>\n    </li>\n  `;\n    })\n    .join('');\n  container.innerHTML = markup;\n}\n","import { getCategories, getTopBooks } from '../api.js';\nimport { refs } from '../refs.js';\nimport {\n  renderCategoriesList,\n  renderCategoriesSelect,\n} from './books-render-categories.js';\nimport { renderTopBooks } from './books-render-top.js';\n\n//////////////////////////////////////////////////////\nexport async function initCategories() {\n  const categories = await getCategories();\n  renderCategoriesList(categories);\n  renderCategoriesSelect(categories);\n}\n\nexport async function initTopBooks() {\n  const topBooksArray = await getTopBooks();\n  renderTopBooks(topBooksArray, refs.booksList);\n}\n","import { getBooksByCategory, getTopBooks } from '../api';\nimport { refs } from '../refs';\nimport { renderTopBooks } from './books-render-top';\n\nexport async function onCategoryLiClick(e) {\n  const li = e.target.closest('li[data-category]');\n  if (!li) return;\n  const category = li.getAttribute('data-category');\n  const name = li.textContent.trim();\n\n  console.log('Клик по категории:', name, '| data-category:', category);\n\n  // Тут можно вызывать getBooksByCategory(category) и т.д.\n  // getBooksByCategory(name);\n  if (category === 'all') {\n    const books = await getTopBooks();\n    renderTopBooks(books, refs.booksList);\n  } else {\n    const books = await getBooksByCategory(category);\n    renderTopBooks(books, refs.booksList); // [{ books }] — твой формат\n  }\n}\n","import { refs } from '../refs.js';\nimport { initTopBooks } from './books-init.js';\nimport { initCategories } from './books-init.js';\nimport { getCategories, getTopBooks, getBooksByCategory } from '../api';\nimport { renderTopBooks } from './books-render-top.js';\nimport { onCategoryLiClick } from './books-handlers.js';\n\ninitCategories();\ninitTopBooks();\n//////////////////////////////\ngetBooksByCategory('Advice How-To and Miscellaneous');\n\nrefs.booksCategoriesList.addEventListener('click', onCategoryLiClick);\n"],"names":["refs","onClickCloseMobileMenu","onClickOpenMobileMenu","onEscCloseMenu","onMenuLinkClick","Swiper","Navigation","axios","getCategories","getBooksByCategory","category","response","error","getTopBooks","renderCategoriesList","categories","markup","categ","renderCategoriesSelect","cat","renderTopBooks","data","container","limit","books","seenTitles","book","book_image","title","author","price","roundedPrice","initCategories","initTopBooks","topBooksArray","onCategoryLiClick","li","name"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/header/heder-handler.js","../src/js/header/mobile-menu.js","../src/js/hero/hero.js","../src/js/api.js","../src/js/books/books-render-append.js","../src/js/books/books-render-categories.js","../src/js/books/books-renders.js","../src/js/books/books-state.js","../src/js/books/books-init.js","../src/js/books/books-counter.js","../src/js/books/books-pagination.js","../src/js/books/books-handlers.js","../src/js/books/books.js"],"sourcesContent":["export const refs = {\n  openMobileMenuBtn: document.querySelector('.header-mobile-menu'),\n  closeMobileMenuBtn: document.querySelector('.mobile-menu-close'),\n  mobileMenuModal: document.querySelector('.mobile-menu-modal'),\n  // books\n  booksCategoriesList: document.querySelector('.books-categories-list'),\n  booksCategoriesSelect: document.querySelector('.books-categories-select'),\n  booksList: document.querySelector('.books-list'),\n  booksShowMoreBtn: document.querySelector('.books-item-show-more'),\n  booksCount: document.querySelector('.books-info'),\n};\n","import { refs } from '../refs.js';\n\nfunction onClickCloseMobileMenu() {\n  refs.mobileMenuModal.classList.remove('is-open');\n  document.body.classList.remove('no-scroll');\n  refs.closeMobileMenuBtn.removeEventListener('click', onClickCloseMobileMenu);\n  refs.openMobileMenuBtn.addEventListener('click', onClickOpenMobileMenu);\n  document.removeEventListener('keydown', onEscCloseMenu);\n  refs.mobileMenuModal.removeEventListener('click', onMenuLinkClick);\n  refs.openMobileMenuBtn.focus();\n}\n\nexport function onClickOpenMobileMenu() {\n  refs.mobileMenuModal.classList.add('is-open');\n  document.body.classList.add('no-scroll');\n  refs.closeMobileMenuBtn.focus();\n  refs.closeMobileMenuBtn.addEventListener('click', onClickCloseMobileMenu);\n  refs.openMobileMenuBtn.removeEventListener('click', onClickOpenMobileMenu);\n\n  document.addEventListener('keydown', onEscCloseMenu);\n  refs.mobileMenuModal.addEventListener('click', onMenuLinkClick);\n}\nfunction onEscCloseMenu(e) {\n  if (e.key === 'Escape') onClickCloseMobileMenu();\n}\nfunction onMenuLinkClick(e) {\n  if (e.target.classList.contains('mobile-menu-link')) {\n    onClickCloseMobileMenu();\n  }\n}\n","import { refs } from '../refs.js';\nimport { onClickOpenMobileMenu } from './heder-handler.js';\n\nrefs.openMobileMenuBtn.addEventListener('click', onClickOpenMobileMenu);\n","// или\nimport Swiper from 'swiper';\nimport { Navigation } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\n\nconst swiper = new Swiper('.swiper', {\n  modules: [Navigation],\n  navigation: {\n    nextEl: '.hero-button-next',\n    prevEl: '.hero-button-prev',\n  },\n  // другие параметры...\n});\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/books';\n\nexport async function getCategories() {\n  try {\n    const response = await axios.get('/category-list');\n    return response.data;\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить категории' });\n    return [];\n  }\n}\n\n// Получение книг по категории\nexport async function getBooksByCategory(category) {\n  try {\n    const response = await axios.get(`/category?category=${category}`);\n    return response.data;\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить книги' });\n    return [];\n  }\n}\n\n// Получение топовых книг (всех категорий)\nexport async function getTopBooks() {\n  try {\n    const response = await axios.get('/top-books');\n    return response.data;\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить топовые книги' });\n    return [];\n  }\n}\n","// Эта функция добавляет книги в конец списка\nexport function appendBooks(books, container) {\n  const markup = books\n    .map(({ book_image, title, author, price }) => {\n      const roundedPrice = price ? Math.ceil(Number(price)) : '';\n      return `\n        <li class=\"books-item\">\n          <img src=\"${book_image}\" alt=\"${title} cover\" class=\"books-item-image\" />\n          <div class=\"books-item-info\">\n            <div class=\"books-item-info-left\">\n              <h4 class=\"books-item-title\">${title}</h4>\n              <p class=\"books-item-author\">${author}</p>\n            </div>\n            <p class=\"books-item-price\">${\n              roundedPrice ? `$${roundedPrice}` : '—'\n            }</p>\n          </div>\n          <button type=\"button\" class=\"books-item-open-modal\">\n            learn more\n          </button>\n        </li>\n      `;\n    })\n    .join('');\n  container.insertAdjacentHTML('beforeend', markup);\n}\n","import { refs } from '../refs';\n\nexport function renderCategoriesList(categories) {\n  const markup = [\n    `<li data-category=\"all\" class=\"active\">All categories</li>`,\n    ...categories\n      .filter(categ => categ.list_name)\n      .map(\n        categ =>\n          // `<li data-category=\"${encodeURIComponent(categ.list_name)}\">${\n          //   categ.list_name\n          // }</li>`\n          `<li data-category=\"${categ.list_name}\">${categ.list_name}</li>`\n      ),\n  ].join('');\n  refs.booksCategoriesList.innerHTML = markup;\n}\n\nexport function renderCategoriesSelect(categories) {\n  const markup = [\n    `<option value=\"\" selected disabled hidden>Categories</option>`,\n    `<option value=\"all\">All categories</option>`,\n    ...categories\n      .filter(cat => cat.list_name)\n      .map(\n        cat =>\n          // `<option value=\"${encodeURIComponent(cat.list_name)}\">${\n          //   cat.list_name\n          // }</option>`\n          `<option value=\"${cat.list_name}\">${cat.list_name}</option>`\n      ),\n  ].join('');\n  refs.booksCategoriesSelect.innerHTML = markup;\n}\n","import { refs } from '../refs';\n\nexport function showLoadMoreButton() {\n  refs.booksShowMoreBtn.classList.remove('is-hidden');\n}\nexport function hideLoadMoreButton() {\n  refs.booksShowMoreBtn.classList.add('is-hidden');\n}\n","export let allBooks = [];\nexport let visibleCount = window.innerWidth < 768 ? 10 : 24;\nexport const PAGE_SIZE = 4;\n\nexport function resetBooksState(books) {\n  allBooks = books;\n  visibleCount = window.innerWidth < 768 ? 10 : 24;\n}\n\nexport function increaseVisibleCount() {\n  visibleCount += PAGE_SIZE;\n}\n","import { getCategories, getTopBooks } from '../api.js';\nimport { refs } from '../refs.js';\nimport { appendBooks } from './books-render-append.js';\nimport {\n  renderCategoriesList,\n  renderCategoriesSelect,\n} from './books-render-categories.js';\n\nimport { hideLoadMoreButton, showLoadMoreButton } from './books-renders.js';\nimport { allBooks, visibleCount } from './books-state.js';\n\n//////////////////////////////////////////////////////\nexport async function initCategories() {\n  try {\n    const categories = await getCategories();\n    renderCategoriesList(categories);\n    renderCategoriesSelect(categories);\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить категории' });\n    console.error('Ошибка загрузки категорий:', error);\n  }\n}\n\nexport function renderInitialBooksPortion() {\n  refs.booksList.innerHTML = ''; // очищаем список\n  const booksToShow = allBooks.slice(0, visibleCount); // берём только часть книг!\n  appendBooks(booksToShow, refs.booksList);\n\n  // Управление кнопкой\n  if (allBooks.length > visibleCount) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n","import { refs } from '../refs.js';\nimport { visibleCount, allBooks } from './books-state.js';\n\nexport function updateBooksCounter() {\n  const countElem = refs.booksCount;\n  if (!countElem) return;\n\n  const shown = Math.min(visibleCount, allBooks.length);\n  if (allBooks.length === 0) {\n    countElem.textContent = `No books to show`;\n  } else {\n    countElem.textContent = `Showing ${shown} of ${allBooks.length}`;\n  }\n}\n","import { refs } from '../refs.js';\nimport { updateBooksCounter } from './books-counter.js';\nimport { renderInitialBooksPortion } from './books-init.js';\nimport { appendBooks } from './books-render-append.js';\nimport { hideLoadMoreButton } from './books-renders.js';\nimport {\n  allBooks,\n  visibleCount,\n  resetBooksState,\n  increaseVisibleCount,\n  PAGE_SIZE,\n} from './books-state.js';\n\nexport function onBooksDataLoaded(books) {\n  resetBooksState(books);\n  renderInitialBooksPortion();\n  updateBooksCounter();\n}\n\nfunction renderNextBooks() {\n  // Вычисляем следующую порцию\n  const newBooks = allBooks.slice(visibleCount, visibleCount + PAGE_SIZE);\n  appendBooks(newBooks, refs.booksList);\n  increaseVisibleCount();\n\n  // Прячем кнопку, если книг больше нет\n  if (visibleCount >= allBooks.length) {\n    hideLoadMoreButton();\n  }\n  updateBooksCounter();\n}\n\nrefs.booksShowMoreBtn.addEventListener('click', renderNextBooks);\n","import { getBooksByCategory, getTopBooks } from '../api';\nimport { onBooksDataLoaded } from './books-pagination.js';\n\n// Фильтрация уникальных книг по названию\nexport function filterUniqueBooksByTitle(books) {\n  const seenTitles = new Set();\n  return books.filter(book => {\n    if (seenTitles.has(book.title)) return false;\n    seenTitles.add(book.title);\n    return true;\n  });\n}\n// Обработчик клика по категории\nexport async function onCategoryLiClick(e) {\n  try {\n    const li = e.target.closest('li[data-category]');\n    if (!li) return;\n    const category = li.getAttribute('data-category');\n\n    let books;\n    if (category === 'all') {\n      const topBooksArray = await getTopBooks();\n      books = topBooksArray.flatMap(category => category.books);\n      books = filterUniqueBooksByTitle(books);\n    } else {\n      books = await getBooksByCategory(category);\n      books = filterUniqueBooksByTitle(books);\n    }\n    onBooksDataLoaded(books);\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить книги' });\n    console.error('Ошибка при выборе категории:', error);\n  }\n}\n\n// Обработчик выбора в select\nexport async function onCategorySelect(e) {\n  try {\n    const value = e.target.value;\n    let books;\n    if (value === 'all') {\n      const topBooksArray = await getTopBooks();\n      books = topBooksArray.flatMap(category => category.books);\n      books = filterUniqueBooksByTitle(books);\n    } else {\n      books = await getBooksByCategory(value);\n      books = filterUniqueBooksByTitle(books);\n    }\n    onBooksDataLoaded(books);\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить книги' });\n    console.error('Ошибка при выборе категории через select:', error);\n  }\n}\n","import { refs } from '../refs.js';\nimport { initCategories } from './books-init.js';\nimport {\n  filterUniqueBooksByTitle,\n  onCategoryLiClick,\n  onCategorySelect,\n} from './books-handlers.js';\nimport { onBooksDataLoaded } from './books-pagination.js';\nimport { getTopBooks } from '../api.js';\n\n// Инициализация категорий (если нужно отрендерить селекты/список)\ninitCategories();\n\n// Обработчики на список и селект категорий\nrefs.booksCategoriesList.addEventListener('click', onCategoryLiClick);\nrefs.booksCategoriesSelect.addEventListener('change', onCategorySelect);\n\n// Первая загрузка книг при открытии страницы\nasync function initPage() {\n  try {\n    const topBooksArray = await getTopBooks();\n    let books = topBooksArray.flatMap(category => category.books);\n    books = filterUniqueBooksByTitle(books);\n    onBooksDataLoaded(books);\n  } catch (error) {\n    // iziToast.error({ title: 'Ошибка', message: 'Не удалось загрузить книги' });\n    console.error('Ошибка загрузки книг при запуске страницы:', error);\n  }\n}\n\ninitPage();\n"],"names":["refs","onClickCloseMobileMenu","onClickOpenMobileMenu","onEscCloseMenu","onMenuLinkClick","Swiper","Navigation","axios","getCategories","getBooksByCategory","category","getTopBooks","appendBooks","books","container","markup","book_image","title","author","price","roundedPrice","renderCategoriesList","categories","categ","renderCategoriesSelect","cat","showLoadMoreButton","hideLoadMoreButton","allBooks","visibleCount","PAGE_SIZE","resetBooksState","increaseVisibleCount","initCategories","error","renderInitialBooksPortion","booksToShow","updateBooksCounter","countElem","shown","onBooksDataLoaded","renderNextBooks","newBooks","filterUniqueBooksByTitle","seenTitles","book","onCategoryLiClick","li","onCategorySelect","value","initPage"],"mappings":"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"}
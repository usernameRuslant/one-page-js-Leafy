import{S as B,N as C,a}from"./assets/vendor-Bqcn7g4X.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();const n={openMobileMenuBtn:document.querySelector(".header-mobile-menu"),closeMobileMenuBtn:document.querySelector(".mobile-menu-close"),mobileMenuModal:document.querySelector(".mobile-menu-modal"),booksCategoriesList:document.querySelector(".books-categories-list"),booksCategoriesSelect:document.querySelector(".books-categories-select"),booksList:document.querySelector(".books-list")};function u(){n.mobileMenuModal.classList.remove("is-open"),document.body.classList.remove("no-scroll"),n.closeMobileMenuBtn.removeEventListener("click",u),n.openMobileMenuBtn.addEventListener("click",m),document.removeEventListener("keydown",b),n.mobileMenuModal.removeEventListener("click",p),n.openMobileMenuBtn.focus()}function m(){n.mobileMenuModal.classList.add("is-open"),document.body.classList.add("no-scroll"),n.closeMobileMenuBtn.focus(),n.closeMobileMenuBtn.addEventListener("click",u),n.openMobileMenuBtn.removeEventListener("click",m),document.addEventListener("keydown",b),n.mobileMenuModal.addEventListener("click",p)}function b(e){e.key==="Escape"&&u()}function p(e){e.target.classList.contains("mobile-menu-link")&&u()}n.openMobileMenuBtn.addEventListener("click",m);new B(".swiper",{modules:[C],navigation:{nextEl:".hero-button-next",prevEl:".hero-button-prev"}});a.defaults.baseURL="https://books-backend.p.goit.global/books";async function h(){return(await a.get("/category-list")).data}async function f(e){console.log("getBooksByCategory вызвана с категорией:",e);try{const t=await a.get(`/category?category=${e}`);return console.log("BOOKS BY CATEGORY:",t.data),t.data}catch(t){return console.error("Ошибка запроса getBooksByCategory:",t),[]}}async function g(){return(await a.get("/top-books")).data}function w(e){const t=['<li data-category="all" class="active">All categories</li>',...e.filter(s=>s.list_name).map(s=>`<li data-category="${encodeURIComponent(s.list_name)}">${s.list_name}</li>`)].join("");n.booksCategoriesList.innerHTML=t}function E(e){const t=['<option value="" selected disabled hidden>Categories</option>','<option value="all">All categories</option>',...e.filter(s=>s.list_name).map(s=>`<option value="${encodeURIComponent(s.list_name)}">${s.list_name}</option>`)].join("");n.booksCategoriesSelect.innerHTML=t}function d(e,t){t.innerHTML="";const r=window.innerWidth<768?10:24;let o=[];Array.isArray(e)&&e.length&&e[0].books?o=e.flatMap(l=>l.books):o=e;const i=new Set,k=o.filter(l=>i.has(l.title)?!1:(i.add(l.title),!0)).slice(0,r).map(({book_image:l,title:y,author:M,price:L})=>{const v=Math.ceil(Number(L));return`
    <li class="books-item">
      <img src="${l}" alt="book cover" class="books-item-image" />
      <div class="books-item-info">
        <div class="books-item-info-left">
          <h4 class="books-item-title">${y}</h4>
          <p class="books-item-author">${M}</p>
        </div>
        <p class="books-item-price">$${v}</p>
      </div>
      <button type="button" class="books-item-open-modal">
        learn more
      </button>
    </li>
  `}).join("");t.innerHTML=k}async function S(){const e=await h();w(e),E(e)}async function O(){const e=await g();d(e,n.booksList)}async function T(e){const t=e.target.closest("li[data-category]");if(!t)return;const s=t.getAttribute("data-category"),r=t.textContent.trim();if(console.log("Клик по категории:",r,"| data-category:",s),s==="all"){const o=await g();d(o,n.booksList)}else{const o=await f(s);d(o,n.booksList)}}S();O();f("Advice How-To and Miscellaneous");n.booksCategoriesList.addEventListener("click",T);
//# sourceMappingURL=index.js.map
